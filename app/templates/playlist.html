{% extends "base.html" %} {% block content %}
<h1>{{playlist_name}}</h1>
<h2>Owner: {{ playlist_owner}}</h2>

<a href="{{ url_for('main.logout') }}">Logout</a>
<a href="{{ url_for('main.playlists') }}">Back</a>
<a style="color: red" href="{{ url_for('main.unfollow_playlist', playlist_id=playlist_id) }}">Unfollow Playlist</a>
<div style="display: flex; width: 100%">
  <div style="width: 100%">
      <ul>
        {% for track in tracks %}
        <li>
          <div style="display: flex; margin-bottom: 10px;">
            <div style="width:20%">
            {{loop.index}} - {{track.name}} -
            {% for artist in track.artists %}
            {{ artist.name }} 
            {% endfor %} 
            {% if playlist_owner == spotify_user_id %}
            </div>
            <div style="margin-left: 10px">

              <form action="{{ url_for('main.remove_from_playlist', track_id=track.id) }}" method="post">
                <input type="hidden" name="csrf_token" value = "{{ csrf_token() }}" />
                <input type="hidden" name="playlist_id" value="{{ playlist_id}}">
                <input type="hidden" name="playlist_position" value="{{ loop.index }}">
                <input type="hidden" name="track_uri" value="{{ track.uri}}">
                <button type="submit">Remove track from playlist</button>
              </form>
            </div>
            {% endif %}
          </div>
        </li>
        {% endfor %}
      </form>
    </ul>
  </div>
</div>

{% endblock %}
